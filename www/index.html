<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style type="text/css">
    html, body {
        width: 100%;
        height: 100%;
        background-color: transparent !important;
    }
    #map_canvas {
        position: relative;
        width: 90%;
        min-height: 300px;
        height: 90%;
        border: 1px solid red;
        background-color: transparent !important;
    }
    </style>

    <script type="text/javascript" src="cordova.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript">
    var map;
    document.addEventListener("deviceready", function() {
      var div = document.getElementById("map_canvas");
      map = plugin.google.maps.Map.getMap(div);
      map.on(plugin.google.maps.event.MAP_READY, onMapInit);
    }, false);

    function onMapInit() {
      $("#searchBtn").click(function() {
        var request = {
          'address': $("#query").val()
        };
        plugin.google.maps.Geocoder.geocode(request, function(results) {
          if (results.length) {
            var backgroundDiv = $("<div>").css({
              "position": "absolute",
              "left": 0,
              "top": 0,
              "width": "100%",
              "height": "100%",
              "background-color": "rgba(0, 0, 0, 0.5)"
            });
            
            $("#map_canvas").append(backgroundDiv);
            
            var resultTable = $("<div>").css({
              "position": "absolute",
              "left": 0,
              "top": 0,
              "width": "100%",
              "height": "100%",
              "overflowY": "scroll"
            });
            resultTable.appendTo("#map_canvas");
            
            results.forEach(function(result) {
              if (!result.position) {
                return;
              }
              var child = $("<div>").css({
                "color": "white",
                "width": "100%",
                "height": "100px",
                "border-bottom": "1px dotted white",
                "padding": "1em"
              });
              child.append(result.adminArea + " - " + result.country + "<br>");
              child.append("<img src='http://maps.googleapis.com/maps/api/streetview?size=80x80&location=" + result.position.lat+ "," + result.position.lng + "&fov=90&heading=0&pitch=0&sensor=false'>");
              child.click(function() {
                backgroundDiv.remove();
                resultTable.remove();
                moveTo(map, result.position, result.adminArea + " - " + result.country);
              });
              child.appendTo(resultTable);
            });
            
          } else {
            alert("Not found");
          }
        });
      });
      
      function moveTo(map, position, title) {
        map.addMarker({
          'position': position,
          'title':  title
        }, function(marker) {
          map.animateCamera({
            'target': position,
            'zoom': 13
          }, function() {
            marker.showInfoWindow();
          });
        });
      }
    }
    </script>
  </head>
  <body>
    <div id="map_canvas">
      <table style="width:90%;margin:1% 1% 1% 30px;">
        <tr>
          <td width="70%"><input id="query" style="width: 100%" /></td>
          <td width="30%"><button id="searchBtn">Search</button></td>
        </tr>
      </table>
    </div>

  </body>
</html>