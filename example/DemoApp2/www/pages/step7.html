<div class="container">
  <div class="description">
    <strong>Step7: Draw a polygon</strong>
    <p>Draw a polygon. Click it!</p>
    <pre class="prettyprint lang-js">
var encodedPolygon = "uyb~FupbzYqAoK|H{@~FaFjCxInFdGkBlEn@|FeEPmA|EaGsDiIUr@_L";
map.addPolygon({
  'points': plugin.google.maps.geometry.encoding.decodePath(encodedPolygon, 5),
  'strokeColor' : '#AA00FF',
  'strokeWidth': 5,
  'fillColor' : '#880000'
}, onPolygonAdded);
function onPolygonAdded(polygon) {
  map.animateCamera({
    target: polygon.getPoints()
  });
  
  polygon.one(plugin.google.maps.event.OVERLAY_CLICK, onOverlayClicked);
}

function onOverlayClicked(polygon, latLng) {
  polygon.setFillColor("blue");
  polygon.setStrokeColor("green");
  polygon.setStrokeWidth(10);
}
</pre>
<button id="nextBtn">Execute &amp; next</button>
  </div>
  
</div>
<script type="text/javascript">
$(document).one("pageLoad", function(evt, result) {
  map.setDiv($("#map_canvas")[0]);
  
  $("#nextBtn").one("touchStart click", function() {
    
    $(".container").addClass("animated zoomOutUp");
    $(".container").one('webkitAnimationEnd animationend', function() {
      $(".container").remove();
      
      var encodedPolygon = "uyb~FupbzYqAoK|H{@~FaFjCxInFdGkBlEn@|FeEPmA|EaGsDiIUr@_L";
      map.addPolygon({
        'points': plugin.google.maps.geometry.encoding.decodePath(encodedPolygon, 5),
        'strokeColor' : '#AA00FF',
        'strokeWidth': 5,
        'fillColor' : '#880000'
      }, onPolygonAdded);
      function onPolygonAdded(polygon) {
        map.animateCamera({
          target: polygon.getPoints()
        });
        
        polygon.one(plugin.google.maps.event.OVERLAY_CLICK, onOverlayClicked);
      }
      
      function onOverlayClicked(polygon, latLng) {
        polygon.setFillColor("blue");
        polygon.setStrokeColor("green");
        polygon.setStrokeWidth(10);
        
        setTimeout(function() {
          loadPage("step8");
        }, 2000);
      }
    });
    
  });
  
});
</script>